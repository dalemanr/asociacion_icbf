<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"></link>
        <f:event type="preRenderView" listener="#{usuarioController.verificarSesisonMama()}"/>
        <f:event type="preRenderView" listener="#{kidController.felizCumple()}"/>
        <f:event type="preRenderView" listener="#{kidController.ninoViejo()}"/>
    </h:head>
    <h:body>
        <header>
            <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light  border-bottom box-shadow mb-3" style="background-color: #E3F2FD">
                <div class="container-fluid" >
                    <a class ="navbar-brand">ICBF</a>
                    <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                        
                    </div>
                </div>
                <div class="position-absolute top-0 end-0">
                    <h:form> <h:commandButton value="Cerrar sesion" action="#{usuarioController.logout()}" class="btn btn-outline-dark" /></h:form>
                </div>
            </nav>   
        </header>
        
        <div class="container">
            <main role="main" class="pb-3 bg-outline-secondary" >
                <div class="card mb-3" style="max-width: 540px;">
                    <div class="row g-0">
                      <div class="col-md-4">
                         <h:graphicImage class="img-fluid rounded-start" alt="Profile picture" value="#{usuarioController.UsuarioLogeado().foto}"/>
                      </div>
                      <div class="col-md-8">
                        <div class="card-body">
                          <h5 class="card-title"><h:outputText class="text-success align-middle px-0" style="font-size: 25px" value="#{usuarioController.UsuarioLogeado().nombre} #{usuarioController.UsuarioLogeado().apellidos}"/></h5>
                          <p class="card-text"></p>
                          <p class="card-text"><small class="text-body-secondary"></small></p>
                        </div>
                      </div>
                    </div>
                </div>
                <h:form>
                    <div class="input-group mb-3">
                <h:inputText  value="#{asistenciaController.variable}"  >
                 </h:inputText>
                     </div>
                    <h:commandButton value="Buscar" class="btn btn-outline-secondary" action="#{asistenciaController.buscarPorFecha()}" />
                    <h:commandButton value="Asistencia Semanal" class="btn btn-outline-warning" action="#{asistenciaController.generarPDFSemanal(actionEvent)}" />
                </h:form>
        
        <f:view>


            <h:form>
                <h1><h:outputText value="Asistencia"/></h1>
                <h:dataTable class="table" value="#{asistenciaController.asistenciasEncontradas}" var="asistencia">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Idasistencia"/>
                        </f:facet>
                        <h:outputText value="#{asistencia.idasistencia}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Asistencia"/>
                        </f:facet>
                        <h:outputText value="#{asistencia.asistencia}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Fecha"/>
                        </f:facet>
                        <h:outputText value="#{asistencia.fecha}">
                            <f:convertDateTime pattern="MM/dd/yyyy" />
                        </h:outputText>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Descripción"/>
                        </f:facet>
                        <h:outputText value="#{asistencia.descripción}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Idkid"/>
                        </f:facet>
                        <h:outputText value="#{asistencia.idkid.nombre} #{asistencia.idkid.apellido}"/>
                    </h:column>
                </h:dataTable>
            </h:form>
        </f:view>
            </main>
        </div>
        
        <footer class="border-bottom border border-black footer text-muted text-center fixed-bottom bg-secundary" >
            <div class="container text-black" >
                &copy; 2023 - ICBF 
            </div>
        </footer >
        

    </h:body>
    
    
        

        
        
 
</html>
